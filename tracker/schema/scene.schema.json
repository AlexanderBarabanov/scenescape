{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://scenescape.intel.com/tracker/schema/scene.schema.json",
  "title": "Scene Configuration",
  "description": "Single scene object from Manager API response for Tracker Service validation. Iterate over API results[] and validate each scene individually.",
  "type": "object",
  "required": ["uid", "name", "cameras"],
  "examples": [
    {
      "uid": "3bc091c7-e449-46a0-9540-29c499bca18c",
      "name": "Retail",
      "cameras": [
        {
          "uid": "camera1",
          "name": "camera1",
          "intrinsics": {
            "fx": 571.26,
            "fy": 571.26,
            "cx": 320.0,
            "cy": 240.0,
            "distortion": { "k1": 0.0, "k2": 0.0, "p1": 0.0, "p2": 0.0 }
          },
          "extrinsics": {
            "translation": [
              2.6651330996559883, 1.0075648853123316, 2.603863333755973
            ],
            "rotation": [
              -137.85924651441334, -19.441505783168942, -15.384890268257454
            ],
            "scale": [1.0, 1.0, 1.0]
          }
        },
        {
          "uid": "camera2",
          "name": "camera2",
          "intrinsics": {
            "fx": 571.26,
            "fy": 571.26,
            "cx": 320.0,
            "cy": 240.0,
            "distortion": { "k1": 0.0, "k2": 0.0, "p1": 0.0, "p2": 0.0 }
          },
          "extrinsics": {
            "translation": [
              4.034863921795162, 2.2777663107089894, 2.9551143733918663
            ],
            "rotation": [
              -132.15360745910087, -8.172752500708558, -5.298590495090165
            ],
            "scale": [1.0, 1.0, 1.0]
          }
        }
      ]
    }
  ],
  "properties": {
    "uid": {
      "type": "string",
      "description": "Scene identifier (UUID from Manager API, used in MQTT topic)",
      "examples": ["3bc091c7-e449-46a0-9540-29c499bca18c"]
    },
    "name": {
      "type": "string",
      "description": "Human-readable scene name",
      "examples": ["Retail", "Queuing", "Main Hall"]
    },
    "cameras": {
      "type": "array",
      "description": "Cameras assigned to this scene with calibration data",
      "items": {
        "$ref": "#/$defs/camera"
      },
      "minItems": 1
    }
  },
  "$defs": {
    "camera": {
      "type": "object",
      "description": "Camera configuration with intrinsic and extrinsic calibration",
      "required": ["uid", "name", "intrinsics", "extrinsics"],
      "properties": {
        "uid": {
          "type": "string",
          "description": "Camera identifier (matches MQTT topic camera_id)",
          "examples": ["camera1", "atag-qcam1"]
        },
        "name": {
          "type": "string",
          "description": "Human-readable camera name"
        },
        "intrinsics": {
          "type": "object",
          "description": "Camera intrinsic parameters (internal camera model)",
          "properties": {
            "fx": {
              "type": "number",
              "description": "Focal length X (pixels)"
            },
            "fy": {
              "type": "number",
              "description": "Focal length Y (pixels)"
            },
            "cx": {
              "type": "number",
              "description": "Principal point X (pixels)"
            },
            "cy": {
              "type": "number",
              "description": "Principal point Y (pixels)"
            },
            "distortion": {
              "type": "object",
              "description": "Lens distortion coefficients",
              "properties": {
                "k1": {
                  "type": "number",
                  "description": "Radial distortion coefficient k1"
                },
                "k2": {
                  "type": "number",
                  "description": "Radial distortion coefficient k2"
                },
                "p1": {
                  "type": "number",
                  "description": "Tangential distortion coefficient p1"
                },
                "p2": {
                  "type": "number",
                  "description": "Tangential distortion coefficient p2"
                }
              },
              "additionalProperties": true
            }
          },
          "additionalProperties": true
        },
        "extrinsics": {
          "type": "object",
          "description": "Camera extrinsic parameters (pose in world coordinates). Matches Python controller's CameraPose class in scene_common/src/scene_common/transform.py",
          "required": ["translation", "rotation", "scale"],
          "properties": {
            "translation": {
              "type": "array",
              "description": "Camera position in world coordinates [x, y, z] (meters)",
              "items": { "type": "number" },
              "minItems": 3,
              "maxItems": 3
            },
            "rotation": {
              "type": "array",
              "description": "Camera orientation as Euler angles [X, Y, Z] (degrees). Uses XYZ rotation order, matching Python controller's Rotation.from_euler('XYZ', rotation, degrees=True)",
              "items": { "type": "number" },
              "minItems": 3,
              "maxItems": 3
            },
            "scale": {
              "type": "array",
              "description": "Scale factors [x, y, z] applied to pose matrix",
              "items": { "type": "number" },
              "minItems": 3,
              "maxItems": 3
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
